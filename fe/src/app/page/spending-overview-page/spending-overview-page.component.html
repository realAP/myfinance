<div class="card">
  <p-table
    [value]="spendingCategoryBlockDtos"
    sortField="category"
    sortMode="single"
    [scrollable]="true"
    rowGroupMode="subheader"
    groupRowsBy="category"
    >
    <ng-template pTemplate="header">
      <tr>
        <th>Kategorie</th>
        <th>Name</th>
        <th>Betrag</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="groupheader" let-spendingCategoryBlockDto>
      <tr pRowGroupHeader>
        <td colspan="3">
          <span class="font-bold ml-2">{{ spendingCategoryBlockDto.category }}</span>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="groupfooter" let-spendingCategoryBlockDto>
      <tr>
        <td></td>
        <td></td>
        <td colspan="3" class="text-right font-bold pr-6">
          Summe: {{ spendingCategoryBlockDto.spendingSumPerCategory }}
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-spendingCategoryBlockDto let-rowIndex="rowIndex">
      @for (spendingRow of spendingCategoryBlockDto.spendingRowDtos; track spendingRow.id) {
        <tr>
          <td>

          </td>
          <td>
            {{ spendingRow.description }}
          </td>
          <td>
            <!--
                      <img
                        src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
                        [class]="'flag-' + customer.country.code"
                        style="width: 20px">
            -->
            <span class="ml-1 vertical-align-middle">
            {{ spendingRow.amount }}
          </span>
          </td>
        </tr>
      }
    </ng-template>
  </p-table>
</div>


<!--
<p>spending-overview-page works!</p>

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Overview</title>
  <link rel="stylesheet" th:href="@{/styles.css}"/>
</head>
<body>
<table>
  <thead>
  <tr>
    <th>ID</th>
    <th>Category</th>
    <th>Description</th>
    <th>Amount</th>
    <th>Rule</th>
    <th>Transfer</th>
    <th>Action</th>
    &lt;!&ndash; Weitere Spaltenk√∂pfe hier &ndash;&gt;
  </tr>
  </thead>
  <tbody>

    @for (spendingCategoryBlockDto of spendingCategoryBlockDtos; track spendingCategoryBlockDto) {
      @for (spendingRowDto of spendingCategoryBlockDto.spendingRowDtos; track spendingRowDto) {

        <td>{{ spendingRowDto.id }}</td>
        &lt;!&ndash;            <td th:text="${spendingRowDto.category}">Category</td>&ndash;&gt;
        <td></td>
        <td>{{ spendingRowDto.category }}</td>
        <td>{{ spendingRowDto.amount }}</td>
        <td>{{ spendingRowDto.ruleDescription }}</td>
        <td>{{ spendingRowDto.transferDescription }}</td>

        <td>
          <form th:action="@{/spendings/{id}/delete(id=${spendingRowDto.id})}" method="get">
            <input type="submit" value="Delete"/>
          </form>
          <form th:action="@{/spendings/{id}/edit(id=${spendingRowDto.id})}" method="get">
            <input type="submit" value="Edit"/>
          </form>
        </td>
      }
      <tr>
        <td></td>
        <td th:text="${spendingCategoryBlockDto.category}">Category</td>
        <td>Summe:</td>
        <td th:text="${spendingCategoryBlockDto.spendingSumPerCategory}">Summe</td>
      </tr>

      <tr>
        <td></td>
      </tr>
    }
  <tr>
    <td>Summe</td>
    <td></td>
    <td></td>
    <td th:text="${sumOfSpendings}"></td>
  </tr>
  </tbody>
</table>
&lt;!&ndash;
&lt;!&ndash; Form to Add New Data &ndash;&gt;
&ndash;&gt;
</body>
</html>


-->
